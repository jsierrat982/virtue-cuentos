<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Título de la página que aparece en la pestaña del navegador -->
    <title>VIRTUE CUENTOS</title>
    <!-- Incluye el CDN de Tailwind CSS para un diseño responsivo y moderno -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Define una fuente global y los estilos personalizados para los botones -->
    <style>
        /* Define una fuente global para toda la página */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Oculta los elementos que no corresponden a la categoría seleccionada */
        .hidden-category {
            display: none;
        }

        /* Estilos del nuevo botón */
        .button {
            background-color: transparent;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            z-index: 1;
            outline: none;
            transition: transform 0.2s ease-in-out;
        }

        .button:active {
            transform: scale(0.95);
        }

        .button-outer {
            position: relative;
            padding: 4px;
            border-radius: 9999px;
            background: linear-gradient(145deg, #e6e6e6, #ffffff);
            box-shadow: 6px 6px 12px #d9d9d9, -6px -6px 12px #ffffff;
        }

        .button:hover .button-outer {
            box-shadow: 3px 3px 6px #d9d9d9, -3px -3px 6px #ffffff;
        }

        .button-inner {
            padding: 8px 16px;
            border-radius: 9999px;
            background-color: #f0f0f0;
            box-shadow: inset 2px 2px 4px #d9d9d9, inset -2px -2px 4px #ffffff;
            color: #555;
        }
        
        /* Estilo para el botón "TODOS" */
        .button.all-active .button-outer,
        .button:first-child .button-outer {
            background: linear-gradient(145deg, #5a9fff, #4285f4);
            box-shadow: 6px 6px 12px #4285f470, -6px -6px 12px #ffffff;
        }
        .button.all-active .button-inner,
        .button:first-child .button-inner {
            background-color: #4285f4;
            box-shadow: inset 2px 2px 4px #3371e7, inset -2px -2px 4px #519aff;
            color: #fff;
        }
    </style>
</head>
<body class="bg-gradient-to-r from-blue-100 to-purple-200 text-gray-800">

    <!-- Contenedor principal de la página, centrado y con márgenes -->
    <div class="container mx-auto p-4 md:p-8">

        <!-- Encabezado de la página -->
        <header class="bg-blue-600 text-white rounded-xl shadow-lg p-6 mb-8 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-2">VIRTUE CUENTOS</h1>
            <p class="text-xl md:text-2xl">Cuentos para inspirar la imaginación.</p>
        </header>

        <!-- Sección de video cuentos -->
        <main class="bg-white rounded-xl shadow-lg p-6 md:p-8 mb-8">
            <!-- Título de la sección de videos -->
            <h2 class="text-2xl md:text-3xl font-semibold text-blue-600 mb-6">Nuestros Video Cuentos</h2>

            <!-- Barra de navegación para las categorías, con los nuevos botones -->
            <nav class="flex flex-wrap justify-center gap-4 mb-6">
                <!-- Botón para mostrar todos los videos -->
                <button
                    onclick="filterVideos('all')"
                    class="button all-active">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>TODOS</span>
                        </div>
                    </div>
                </button>
                <!-- Botones para filtrar por categoría -->
                <button
                    onclick="filterVideos('honestidad')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>HONESTIDAD</span>
                        </div>
                    </div>
                </button>
                <button
                    onclick="filterVideos('generosidad')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>GENEROSIDAD</span>
                        </div>
                    </div>
                </button>
                <button
                    onclick="filterVideos('respeto')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>RESPETO</span>
                        </div>
                    </div>
                </button>
                <button
                    onclick="filterVideos('empatia')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>EMPATÍA</span>
                        </div>
                    </div>
                </button>
                <button
                    onclick="filterVideos('responsabilidad')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>RESPONSABILIDAD</span>
                        </div>
                    </div>
                </button>
                <button
                    onclick="filterVideos('amistad')"
                    class="button">
                    <div class="button-outer">
                        <div class="button-inner">
                            <span>AMISTAD</span>
                        </div>
                    </div>
                </button>
            </nav>

            <!-- Contenedor de la cuadrícula para los videos -->
            <div id="video-container" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">

                <!-- Tarjeta de video 1: Empatía -->
                <div class="video-card categoria-empatia bg-blue-50 rounded-lg shadow-md overflow-hidden p-4">
                    <!-- Contenedor para el video con relación de aspecto 16:9 -->
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <!-- Iframe de YouTube para el video -->
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/L1m41Q9t3z4"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <!-- Título y descripción del video -->
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-blue-800 mb-2">El Valor de la Empatía</h3>
                        <p class="text-gray-600">Un cuento que enseña a ponerse en el lugar de los demás.</p>
                    </div>
                </div>

                <!-- Tarjeta de video 2: Honestidad -->
                <div class="video-card categoria-honestidad bg-green-50 rounded-lg shadow-md overflow-hidden p-4">
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/g2qF7z-T4yI"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-green-800 mb-2">La Importancia de la Honestidad</h3>
                        <p class="text-gray-600">Una historia para aprender sobre ser honesto y decir la verdad.</p>
                    </div>
                </div>

                <!-- Tarjeta de video 3: Amistad -->
                <div class="video-card categoria-amistad bg-yellow-50 rounded-lg shadow-md overflow-hidden p-4">
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/n4f7-eYw9jM"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-yellow-800 mb-2">El Valor de la Amistad</h3>
                        <p class="text-gray-600">Un cuento sobre la importancia de la amistad y el compañerismo.</p>
                    </div>
                </div>

                <!-- Tarjeta de video 4: Generosidad -->
                <div class="video-card categoria-generosidad bg-blue-50 rounded-lg shadow-md overflow-hidden p-4">
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/409k_T89J1s"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-blue-800 mb-2">La Generosidad del Sol</h3>
                        <p class="text-gray-600">Una historia sobre dar sin esperar nada a cambio.</p>
                    </div>
                </div>

                <!-- Tarjeta de video 5: Respeto -->
                <div class="video-card categoria-respeto bg-green-50 rounded-lg shadow-md overflow-hidden p-4">
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/8-qgV_t7jD4"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-green-800 mb-2">El Respeto a los Mayores</h3>
                        <p class="text-gray-600">Un cuento para aprender a valorar y escuchar a los mayores.</p>
                    </div>
                </div>

                <!-- Tarjeta de video 6: Responsabilidad -->
                <div class="video-card categoria-responsabilidad bg-yellow-50 rounded-lg shadow-md overflow-hidden p-4">
                    <div class="aspect-w-16 aspect-h-9 w-full">
                        <iframe
                            class="w-full h-auto rounded-lg"
                            src="https://www.youtube.com/embed/1d1n2bA-4eI"
                            frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                            allowfullscreen>
                        </iframe>
                    </div>
                    <div class="p-4 text-center">
                        <h3 class="text-xl font-bold text-yellow-800 mb-2">Mi Responsabilidad en Casa</h3>
                        <p class="text-gray-600">Una historia que enseña a los niños a ser responsables.</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Sección para crear cuentos con Gemini -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mt-8">
            <h2 class="text-2xl md:text-3xl font-semibold text-blue-600 mb-6">Crea tu Propio Cuento ✨</h2>

            <!-- Formulario de generación de cuentos -->
            <div class="space-y-4">
                <div>
                    <label for="virtue-select" class="block text-gray-700 font-medium mb-1">Selecciona una virtud:</label>
                    <select id="virtue-select" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow duration-200">
                        <option value="honestidad">Honestidad</option>
                        <option value="generosidad">Generosidad</option>
                        <option value="respeto">Respeto</option>
                        <option value="empatia">Empatía</option>
                        <option value="responsabilidad">Responsabilidad</option>
                        <option value="amistad">Amistad</option>
                    </select>
                </div>
                <div>
                    <label for="character-input" class="block text-gray-700 font-medium mb-1">Añade un personaje o detalle (opcional):</label>
                    <input type="text" id="character-input" placeholder="Ej: 'un oso valiente' o 'en un bosque mágico'" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow duration-200">
                </div>
                <button onclick="generateStory()"
                    class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center space-x-2">
                    <span>Generar Cuento</span>
                    <span role="img" aria-label="sparkles">✨</span>
                </button>
            </div>

            <!-- Contenedor para mostrar el cuento generado -->
            <div id="story-output" class="mt-8 p-6 bg-gray-50 rounded-lg shadow-inner hidden">
                <div id="loading-indicator" class="hidden text-center text-gray-500">
                    <p>Generando tu cuento, por favor espera...</p>
                </div>
                <div id="story-content" class="whitespace-pre-wrap text-gray-700 leading-relaxed"></div>
            </div>

            <!-- Contenedor para mostrar mensajes de error -->
            <div id="error-message" class="hidden mt-4 text-red-600 text-center"></div>
        </section>

        <!-- Sección de subida de archivos -->
        <section class="bg-white rounded-xl shadow-lg p-6 md:p-8 mt-8">
            <h2 class="text-2xl md:text-3xl font-semibold text-blue-600 mb-6">Sube tu Propio Cuento 📄</h2>
            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                <label for="file-upload-input" class="cursor-pointer block">
                    <!-- Icono SVG de subida de archivo para un mejor UX -->
                    <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                        <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28m0 0l4 4m4-4l1.172-1.172a4 4 0 00-5.656 0L28 28m0 0l-4 4m4-4l4 4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="mt-2 block text-sm font-medium text-gray-900">
                        Arrastra y suelta un archivo o <span class="text-blue-600 hover:text-blue-800 font-semibold">haz clic para subir</span>
                    </span>
                    <!-- Input de tipo archivo que está oculto visualmente -->
                    <input id="file-upload-input" name="file-upload" type="file" class="sr-only" onchange="displayFileName(this.files)" />
                </label>
            </div>
            <!-- Contenedor para mostrar mensajes de estado de la subida -->
            <div id="upload-message" class="mt-4 p-4 text-center rounded-lg text-gray-700 hidden"></div>
        </section>

        <!-- Pie de página (Footer) -->
        <footer class="text-center mt-8 text-gray-500">
            <div class="mb-4">
                <p class="mb-2">Síguenos en nuestras redes sociales:</p>
                <!-- Contenedor para los íconos de redes sociales -->
                <div class="flex justify-center space-x-4">
                    <!-- Enlace para Instagram -->
                    <a href="#" class="text-pink-500 hover:text-pink-600 transition-colors duration-200">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm3.333 3.333c.85 0 1.54.69 1.54 1.54v1.272a.77.77 0 01-.77.77h-1.272a.77.77 0 01-.77-.77V6.873c0-.85.69-1.54 1.54-1.54zm-3.333 2.147c2.25 0 4.09 1.84 4.09 4.09s-1.84 4.09-4.09 4.09-4.09-1.84-4.09-4.09 1.84-4.09 4.09-4.09zm0 1.487c-1.42 0-2.583 1.163-2.583 2.583s1.163 2.583 2.583 2.583 2.583-1.163 2.583-2.583-1.163-2.583-2.583-2.583z"/>
                        </svg>
                    </a>
                    <!-- Enlace para TikTok -->
                    <a href="#" class="text-black hover:text-gray-700 transition-colors duration-200">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M12.5 1.5c.828 0 1.5.672 1.5 1.5v8.5a1.5 1.5 0 001.5 1.5h1.22c-.67 1.48-1.74 2.87-3.08 4.04-1.29 1.14-2.83 2.05-4.52 2.65-.96.33-1.95.49-2.95.49-.66 0-1.3-.06-1.93-.17v-1.95a.998.998 0 00-.97-.83c-1.22 0-2.22-.98-2.22-2.22s1-2.22 2.22-2.22h.7a.99.99 0 00.99-.99V8.5a.998.998 0 00-.97-.83c-1.22 0-2.22-.98-2.22-2.22s1-2.22 2.22-2.22h.7a.99.99 0 00.99-.99V1.5a1.5 1.5 0 011.5-1.5zM12.5 3h-1.5c-.828 0-1.5.672-1.5 1.5v6.5a1.5 1.5 0 001.5 1.5h1.5a1.5 1.5 0 011.5 1.5v.5a1.5 1.5 0 01-1.5 1.5h-1.5c-1.04 0-2.02-.15-2.95-.45a1.5 1.5 0 01-1.28-1.63v-1.22a.998.998 0 00-.97-.83c-1.22 0-2.22-.98-2.22-2.22s1-2.22 2.22-2.22h.7a.998.998 0 00.97-.83V1.5a1.5 1.5 0 011.5-1.5h1.5a1.5 1.5 0 011.5 1.5v2h-1.5z"/>
                        </svg>
                    </a>
                    <!-- Enlace para YouTube -->
                    <a href="#" class="text-red-500 hover:text-red-600 transition-colors duration-200">
                        <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                            <path d="M21.584 7.186a2.805 2.805 0 00-2.008-2.008C17.771 4 12 4 12 4s-5.771 0-7.576 1.178a2.805 2.805 0 00-2.008 2.008C2 8.911 2 12 2 12s0 3.089 1.178 4.814a2.805 2.805 0 002.008 2.008c1.805 1.178 7.576 1.178 7.576 1.178s5.771 0 7.576-1.178a2.805 2.805 0 002.008-2.008C22 15.089 22 12 22 12s0-3.089-1.178-4.814zM9.954 15.353V8.647L15.114 12l-5.16 3.353z"/>
                        </svg>
                    </a>
                </div>
            </div>
            <p>&copy; 2025 Virtue Cuentos. Todos los derechos reservados.</p>
        </footer>

    </div>

    <script>
        // Función para filtrar videos por categoría
        function filterVideos(category) {
            const videoCards = document.querySelectorAll('.video-card');
            const buttons = document.querySelectorAll('.button');

            // Quita la clase de activo de todos los botones
            buttons.forEach(button => {
                button.classList.remove('all-active');
            });
            // Añade la clase de activo al botón seleccionado
            const selectedButton = document.querySelector(`.button[onclick="filterVideos('${category}')"]`);
            if (selectedButton) {
                selectedButton.classList.add('all-active');
            }

            // Oculta todos los videos
            videoCards.forEach(card => {
                card.classList.add('hidden-category');
            });

            // Muestra solo los videos de la categoría seleccionada
            if (category === 'all') {
                videoCards.forEach(card => {
                    card.classList.remove('hidden-category');
                });
            } else {
                const filteredCards = document.querySelectorAll(`.categoria-${category}`);
                filteredCards.forEach(card => {
                    card.classList.remove('hidden-category');
                });
            }
        }

        // Función asíncrona para generar un cuento usando la API de Gemini
        async function generateStory() {
            const virtueSelect = document.getElementById('virtue-select');
            const characterInput = document.getElementById('character-input');
            const storyOutput = document.getElementById('story-output');
            const loadingIndicator = document.getElementById('loading-indicator');
            const storyContent = document.getElementById('story-content');
            const errorMessage = document.getElementById('error-message');

            // Obtiene la virtud seleccionada y el detalle del personaje
            const selectedVirtue = virtueSelect.value;
            const characterDetail = characterInput.value.trim();

            // Oculta el contenido anterior y muestra el indicador de carga
            storyOutput.classList.remove('hidden');
            storyContent.innerText = '';
            errorMessage.classList.add('hidden');
            loadingIndicator.classList.remove('hidden');

            // Crea el prompt para la API de Gemini
            let prompt = `Escribe un cuento infantil corto (2-3 párrafos) que ejemplifique la virtud de la ${selectedVirtue}.`;
            if (characterDetail) {
                prompt += ` El cuento debe incluir el siguiente detalle: ${characterDetail}.`;
            }

            try {
                // Llamada a la API de Gemini
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error(`Error de respuesta de la API: ${response.statusText}`);
                }

                const result = await response.json();

                // Verifica la estructura de la respuesta
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const storyText = result.candidates[0].content.parts[0].text;
                    storyContent.innerText = storyText;
                } else {
                    throw new Error('Estructura de respuesta de la API no válida.');
                }

            } catch (error) {
                console.error("Error al generar el cuento:", error);
                errorMessage.innerText = 'No se pudo generar el cuento. Por favor, inténtalo de nuevo.';
                errorMessage.classList.remove('hidden');
                storyContent.innerText = '';
            } finally {
                // Oculta el indicador de carga
                loadingIndicator.classList.add('hidden');
            }
        }
        
        // Función para mostrar el nombre del archivo seleccionado
        function displayFileName(files) {
            const uploadMessage = document.getElementById('upload-message');
            uploadMessage.classList.remove('hidden', 'text-green-700', 'bg-green-50', 'text-red-700', 'bg-red-50');
            
            if (files.length > 0) {
                const fileName = files[0].name;
                uploadMessage.innerText = `Archivo seleccionado: ${fileName}. La subida de archivo real requiere un servidor.`;
                uploadMessage.classList.add('text-green-700', 'bg-green-50');
            } else {
                uploadMessage.innerText = 'No se seleccionó ningún archivo.';
                uploadMessage.classList.add('text-red-700', 'bg-red-50');
            }
            uploadMessage.classList.remove('hidden');
        }
    </script>

</body>
</html>
